{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2021-08-16 03:41:15.087932",
 "css": "@media print{@page {size: landscape}}\n@media screen{@page {size: landscape}}",
 "custom_format": 0,
 "disabled": 0,
 "doc_type": "RBF Data",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2>RBF Data<br><small>{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row text-center\\\">\\r\\n        <h4>{{doc.facility_name}}</h4>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row text-center\\\">\\r\\n      <div class=\\\"col-xs-4 \\\">\\r\\n        <strong>Equity bounce :</strong>  {{doc.equity_bounce}}\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\\"col-xs-4\\\">\\r\\n        <strong>Quality bounce :</strong>  {{doc.quality_bounce}}\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\\"col-xs-4\\\">\\r\\n        <strong>fraud :</strong>  {{doc.fraud}}\\r\\n      </div>\\r\\n      \\r\\n</div>\\r\\n<div class=\\\"col-xs-6\\\">\\r\\n</div>\\r\\n</div>\\r\\n\\r\\n{%- set t_row_b = namespace(value=0)  -%}\\r\\n  {%- set t_net_with_qua = namespace(value=0)  -%}\\r\\n  {%- set t_net_with_qua_after_ded = namespace(value=0)  -%}\\r\\n  {%- set t_medical_supply = namespace(value=0)  -%}\\r\\n  {%- set t_incentives = namespace(value=0)  -%}\\r\\n  {%- set t_equity_bounce_with_ince = namespace(value=0)  -%}\\r\\n  {%- set t_equity_bounce_with_ded = namespace(value=0)  -%}\\r\\n\\r\\n{%- for row in doc.service_detail -%}\\r\\n  \\r\\n  {%- set row_b = row.ser_price * row.ser_no  -%}\\r\\n  {%- set a_net_with_qua = (doc.quality_bounce * row_b) + row_b -%}\\r\\n  {%- set a_net_with_qua_after_ded = a_net_with_qua -%}\\r\\n  {%- set a_medical_supply = (a_net_with_qua_after_ded/100) * doc.medical_supply  -%}\\r\\n  {%- set a_incentives = (a_net_with_qua_after_ded/100) * doc.incentive  -%}\\r\\n  {%- set a_equity_bounce_with_ince = (doc.equity_bounce* a_incentives) + a_incentives  -%}\\r\\n  {%- set a_equity_bounce_with_ded = (doc.equity_bounce* a_incentives) + a_incentives  -%}\\r\\n  \\r\\n  {%- set t_row_b.value = t_row_b.value +row_b  -%}\\r\\n  {%- set t_net_with_qua.value = t_net_with_qua.value +a_net_with_qua  -%}\\r\\n  {%- set t_net_with_qua_after_ded.value = t_net_with_qua_after_ded.value +a_net_with_qua_after_ded  -%}\\r\\n  {%- set t_medical_supply.value = t_medical_supply.value +a_medical_supply  -%}\\r\\n  {%- set t_incentives.value = t_incentives.value +a_incentives  -%}\\r\\n  {%- set t_equity_bounce_with_ince.value = t_equity_bounce_with_ince.value + a_equity_bounce_with_ince  -%}\\r\\n  {%- set t_equity_bounce_with_ded.value = t_equity_bounce_with_ded.value + a_equity_bounce_with_ded  -%}\\r\\n  \\r\\n{%- endfor -%}\\r\\n\\r\\n{%  set data = namespace(server_ip=[]) %}\\r\\n{% set ind_price = frappe.get_doc('Indicator Price', doc.ind_price_id) %}\\r\\n<div class=\\\"row\\\">\\r\\n<div class=\\\"col-xs-12\\\">\\r\\n<table class=\\\"table table-bordered\\\">\\r\\n  <thead>\\r\\n    <tr>\\r\\n      <th scope=\\\"col\\\">service</th>\\r\\n      <th scope=\\\"col\\\">Real price</th>\\r\\n      <th scope=\\\"col\\\">NO of services</th>\\r\\n      <th scope=\\\"col\\\">40%</th>\\r\\n      <th scope=\\\"col\\\">60%</th>\\r\\n      <th scope=\\\"col\\\">position</th>\\r\\n      <th scope=\\\"col\\\">Real weight</th>\\r\\n      <th scope=\\\"col\\\">Fixed service Points</th>\\r\\n      <th scope=\\\"col\\\">Indices/Quarter</th>\\r\\n      <th scope=\\\"col\\\">Total</th>\\r\\n      <th scope=\\\"col\\\">Equity bounce</th>\\r\\n      <th scope=\\\"col\\\">Total+E b</th>\\r\\n      <th scope=\\\"col\\\">Deductions</th>\\r\\n      <th scope=\\\"col\\\">Total Ded</th>\\r\\n      <th scope=\\\"col\\\">After deductin</th>\\r\\n    </tr>\\r\\n  </thead>\\r\\n  <tbody>\\r\\n  \\r\\n  {%- for  items1 in doc.service_detail -%}\\r\\n  \\r\\n      {%- set t_real_weight = namespace(value=0)  -%}\\r\\n      {%- set t_fixed_service_point = namespace(value=0)  -%}\\r\\n      {%- set t_medical_supply = namespace(value=0)  -%}\\r\\n      {%- set t_t_ind_qua = namespace(value=0)  -%}\\r\\n      {%- set t_t_tot_equ = namespace(value=0)  -%}\\r\\n      {%- set t_ded_lev = namespace(value=0)  -%}\\r\\n      {%- set t_t_after_ded = namespace(value=0)  -%}\\r\\n      \\r\\n      {%- set a_ser_name = items1.ser_name -%}\\r\\n      {%- set row_b = items1.ser_price * items1.ser_no  -%}\\r\\n      {%- set a_net_with_qua = (doc.quality_bounce * row_b) + row_b -%}\\r\\n      {%- set a_net_with_qua_after_ded = a_net_with_qua -%}\\r\\n      {%- set a_medical_supply = (a_net_with_qua_after_ded/100) * doc.medical_supply  -%}\\r\\n      {%- set a_incentives = (a_net_with_qua_after_ded/100) * doc.incentive  -%}\\r\\n      {%- set a_equity_bounce_with_ince = (doc.equity_bounce* a_incentives) + a_incentives  -%}\\r\\n      {%- set a_equity_bounce_with_ded = (doc.equity_bounce* a_incentives) + a_incentives  -%}\\r\\n      \\r\\n        {% for dep in ind_price.service_dep_detail|selectattr(\\\"ser_name\\\",\\\"equalto\\\",a_ser_name)|list %}\\r\\n            {%- set ind_qua = ind_price.service_dep_detail|selectattr(\\\"ser_name\\\",\\\"equalto\\\",a_ser_name)|list|sum(attribute='fixed_service_point') -%}\\r\\n            {%- set ind_qua = frappe.utils.flt(a_incentives /ind_qua ,2) -%}\\r\\n            {%- set t_ind_qua = ind_qua * dep.fixed_service_point  -%}\\r\\n            {%- set t_t_ind_qua.value = t_t_ind_qua.value + t_ind_qua  -%}\\r\\n            {%- set t_tot_equ = ((t_ind_qua /100) * doc.equity_bounce) + t_ind_qua  -%}\\r\\n            {%- set t_t_tot_equ.value = t_t_tot_equ.value +  t_tot_equ -%}\\r\\n            {%- set t_ded_lev.value = 0 -%}\\r\\n            \\r\\n            <tr>\\r\\n                {% if loop.first %}\\r\\n                    <td rowspan={{loop.length}}>{{items1.ser_name}}</td>\\r\\n                    <td rowspan={{loop.length}}>{{items1.ser_price}}</td>\\r\\n                    <td rowspan={{loop.length}}>{{frappe.utils.flt(items1.ser_no,2)}}</td>\\r\\n                    <td rowspan={{loop.length}}>{{frappe.utils.flt(a_incentives,2)}}</td>\\r\\n                    <td rowspan={{loop.length}}>{{frappe.utils.flt(a_medical_supply,2)}}</td>\\r\\n                    \\r\\n                {% endif %}\\r\\n                    \\r\\n                  {%- for  d_dep in doc.dud_dep|selectattr(\\\"dep_name\\\",\\\"equalto\\\",dep.dep_name)|list -%}\\r\\n                  \\r\\n                  {%- set t_ded_lev.value = d_dep.ded_final -%}\\r\\n                 \\r\\n                  {%- endfor -%}\\r\\n                {%- set t_tot_ded = (t_ind_qua/60)* t_ded_lev.value  -%}\\r\\n                {%- set t_after_ded = t_tot_equ - t_tot_ded   -%}\\r\\n                {%- set t_t_after_ded.value = t_t_after_ded.value + t_after_ded   -%}\\r\\n                \\r\\n                {%- set data.server_ip = data.server_ip + [{ 'ser_name' : dep.dep_name , 'val': t_after_ded }] -%}\\r\\n                \\r\\n                \\r\\n                 \\r\\n               \\r\\n              \\r\\n              <td>{{dep.dep_name}}</td>\\r\\n              <td>{{dep.real_weight}}</td>\\r\\n              <td>{{dep.fixed_service_point}}</td>\\r\\n              \\r\\n              \\r\\n              \\r\\n              \\r\\n              \\r\\n              \\r\\n              <td>{{frappe.utils.flt(ind_qua,3)}}</td>\\r\\n              <td>{{frappe.utils.flt(t_ind_qua,2)}}</td>\\r\\n              <td>{{frappe.utils.flt(doc.equity_bounce,2)}}</td>\\r\\n              <td>{{frappe.utils.flt(t_tot_equ,2)}}</td>\\r\\n              <td>{{frappe.utils.flt(t_ded_lev.value,2)}}</td>\\r\\n              <td>{{frappe.utils.flt(t_tot_ded,2)}}</td>\\r\\n              <td>{{frappe.utils.flt(t_after_ded,2)}}</td>\\r\\n              \\r\\n            </tr>\\r\\n            {%- set t_real_weight.value = t_real_weight.value +dep.real_weight  -%}\\r\\n            {%- set t_fixed_service_point.value = t_fixed_service_point.value +dep.fixed_service_point  -%}\\r\\n            \\r\\n        \\r\\n      \\r\\n    \\r\\n    {%- endfor -%}\\r\\n            <tr>\\r\\n                <td colspan=6> Total</td>\\r\\n                <td>{{frappe.utils.flt(t_real_weight.value,2)}}</td>\\r\\n                <td>{{frappe.utils.flt(t_fixed_service_point.value,2)}}</td>\\r\\n                <td>0</td>\\r\\n                <td>{{frappe.utils.flt(t_t_ind_qua.value,2)}}</td>\\r\\n                <td>0</td>\\r\\n                <td>{{frappe.utils.flt(t_t_tot_equ.value,2)}}</td>\\r\\n                <td>0</td>\\r\\n                <td>0</td>\\r\\n                <td>{{frappe.utils.flt(t_t_after_ded.value,2)}}</td>\\r\\n            \\r\\n            </tr>\\r\\n {%- endfor -%}\\r\\n  \\r\\n  </tbody>\\r\\n</table>\\r\\n\\r\\n<table class=\\\"table table-bordered\\\">\\r\\n  <thead>\\r\\n    <tr>\\r\\n      <th scope=\\\"col\\\">position</th>\\r\\n      <th scope=\\\"col\\\">After deductin</th>\\r\\n    </tr>\\r\\n  </thead>\\r\\n  <tbody>\\r\\n    {% for city, items in data.server_ip|groupby(\\\"ser_name\\\") %}\\r\\n{%- set sum_val = items|selectattr(\\\"ser_name\\\",\\\"equalto\\\",city)|list|sum(attribute='val')|int -%}\\r\\n    <tr>\\r\\n        <td>{{ city }} </td>  \\r\\n        <td>  {{sum_val}} </td>\\r\\n    </tr>\\r\\n{% endfor %}\\r\\n    \\r\\n  \\r\\n  </tbody>\\r\\n  </table>\\r\\n\\r\\n\\r\\n</div>\\r\\n</div>\"}]",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-12-06 09:56:11.216890",
 "modified_by": "Administrator",
 "module": "Healthcare Services",
 "name": "RPF Dashboard",
 "owner": "Administrator",
 "print_format_builder": 1,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}